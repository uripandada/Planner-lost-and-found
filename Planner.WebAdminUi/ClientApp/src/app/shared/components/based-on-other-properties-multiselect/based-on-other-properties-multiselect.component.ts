import { Component, Input } from '@angular/core';
import { FormArray, FormBuilder } from '@angular/forms';
import { ActivatedRoute } from '@angular/router';
import { ProductListItem } from '../../../core/autogenerated-clients/api-client';

@Component({
  selector: 'app-based-on-other-properties-multiselect',
  templateUrl: './based-on-other-properties-multiselect.component.html',
  styleUrls: ['./based-on-other-properties-multiselect.component.scss'],
})
export class BasedOnOtherPropertiesMultiselectComponent {

  @Input() otherPropertiesFormArray: FormArray;

  basedOnOtherPropertyTypes: Array<{ key: string, value: string, group: string }> = [
    { key: "EQUALS", value: "Equals", group: "SIMPLE_COMPARISON" },
    { key: "CONTAINS", value: "Contains", group: "SIMPLE_COMPARISON" },
    { key: "BEGINS_WITH", value: "Begins with", group: "SIMPLE_COMPARISON" },
    { key: "ENDS_WITH", value: "Ends with", group: "SIMPLE_COMPARISON" },
    { key: "REGEX", value: "Regex", group: "REGEX" },
  ];

  constructor(private _formBuilder: FormBuilder, private _route: ActivatedRoute) {
  }

  ngOnInit(): void {

  }

  add() {
    this.otherPropertiesFormArray.push(this._createOtherPropertiesExtendedFormGroup());
  }

  remove(valueFormIndex: number) {
    this.otherPropertiesFormArray.removeAt(valueFormIndex);
  }

  private _createOtherPropertiesExtendedFormGroup() {
    return this._formBuilder.group({
      basedOnOtherPropertiesTypeKey: ["EQUALS"],
      key: [""],
      value: [""],
    });
  }
}
