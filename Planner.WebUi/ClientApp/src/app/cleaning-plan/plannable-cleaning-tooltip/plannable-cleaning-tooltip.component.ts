import { Component, Input, OnInit } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { ICleaningTimelineItemData } from '../../core/autogenerated-clients/api-client';

@Component({
  selector: 'app-plannable-cleaning-tooltip',
  templateUrl: './plannable-cleaning-tooltip.component.html',
  styleUrls: ['./plannable-cleaning-tooltip.component.scss']
})
export class PlannableCleaningTooltipComponent implements OnInit {

  @Input() data: ICleaningTimelineItemData;

  elementId$: BehaviorSubject<string> = new BehaviorSubject<string>('');

  occupiedByReservations = [];

  constructor() {
  }

  ngOnInit(): void {
    this.elementId$.next(this.data.roomId);
    if (this.data && this.data.reservations && this.data.reservations.length > 0) {
      this.occupiedByReservations = this.data.reservations.filter(r => r.reservationStatusKey === 'Current');
    }
  }
}
