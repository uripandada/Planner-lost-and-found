import { Component, Input, OnInit } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { IPlannedCleaningTimelineItemData } from '../../core/autogenerated-clients/api-client';

@Component({
  selector: 'app-cleaning-timeline-item-tooltip',
  templateUrl: './cleaning-timeline-item-tooltip.component.html',
  styleUrls: ['./cleaning-timeline-item-tooltip.component.scss']
})
export class CleaningTimelineItemTooltipComponent implements OnInit {

  @Input() data: IPlannedCleaningTimelineItemData;

  elementId$: BehaviorSubject<string> = new BehaviorSubject<string>('');

  occupiedByReservations = [];

  constructor() {
  }

  ngOnInit(): void {
    this.elementId$.next(this.data.roomId);
    if (this.data && this.data.reservations && this.data.reservations.length > 0) {
      this.occupiedByReservations = this.data.reservations.filter(r => r.reservationStatusKey === 'Current');
    }
  }
}
