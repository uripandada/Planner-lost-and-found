<form [formGroup]="taskRecurringWeeklyForm">

  <div class="task-recurring-weekly-component">
    <div>
      <div class="inline-form-row">
        <label>Starts at</label>
        <div>
          <app-date-time [dateControl]="taskRecurringWeeklyForm.controls.startsAtDate" [timeControl]="taskRecurringWeeklyForm.controls.startsAtTime"></app-date-time>
          <!--<mat-form-field class="example-full-width" appearance="outline">
            <input matInput [matDatepicker]="picker" formControlName="startsAtDate" (click)="picker.open()">
            <mat-datepicker-toggle matSuffix [for]="picker">
              <i class="icofont-calendar" matDatepickerToggleIcon></i>
            </mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>-->
        </div>
      </div>
      <div class="task-recurring-week">
        <div *ngFor="let weekDayFormGroup of weekDaysArray.controls" class="recurring-week-day">
          <div class="recurring-week-day-header">{{weekDayFormGroup.controls.dayKey.value}}</div>
          <div class="recurring-week-day-body">
            <app-time-multiselect [timesArray]="weekDayFormGroup.controls.startsAtTimesArray"></app-time-multiselect>
          </div>
        </div>
      </div>
      <!--<div class="inline-form-row at-times-daily-wrapper">
        <label>At times</label>
        <div>
          <app-time-multiselect [timesArray]="taskRecurringDailyForm.controls.startsAtTimesArray"></app-time-multiselect>
        </div>
      </div>-->
    </div>
  </div>

  <div class="form-groups task-recurring-until-wrapper">
    <!--<div class="form-group-title">Task repeats</div>-->
    <div class="">
      <div class="inline-form-row">
        <label>Repeats for</label>
        <div>
          <mat-radio-group aria-labelledby=""
                           class="task-recurrence-radio-group"
                           formControlName="repeatsForKey">
            <div class="radio-button-list-item">
              <mat-radio-button class="" value="NUMBER_OF_DAYS">
                Number of days
              </mat-radio-button>
              <mat-form-field appearance="outline" class="short-number-input text-right" *ngIf="taskRecurringWeeklyForm.controls.repeatsForKey.value === 'NUMBER_OF_DAYS'">
                <input type="text" matInput placeholder="X" formControlName="repeatsForNrDays" />
                <span matSuffix>days</span>
              </mat-form-field>
            </div>
            <div class="radio-button-list-item">
              <mat-radio-button class="" value="NUMBER_OF_OCCURENCES">
                Number of occurences
              </mat-radio-button>
              <mat-form-field appearance="outline" class="short-number-input text-right" *ngIf="taskRecurringWeeklyForm.controls.repeatsForKey.value === 'NUMBER_OF_OCCURENCES'">
                <input type="text" matInput placeholder="X" formControlName="repeatsForNrOccurences" />
                <span matSuffix>times</span>
              </mat-form-field>
            </div>
            <div class="radio-button-list-item">
              <mat-radio-button class="" value="SPECIFIC_DATE">
                Until date
              </mat-radio-button>
              <div *ngIf="taskRecurringWeeklyForm.controls.repeatsForKey.value === 'SPECIFIC_DATE'">
                <app-date-time [dateControl]="taskRecurringWeeklyForm.controls.repeatsUntilDate" [timeControl]="taskRecurringWeeklyForm.controls.repeatsUntilTime"></app-date-time>
              </div>
            </div>
          </mat-radio-group>
        </div>
      </div>



    </div>
  </div>
</form>
