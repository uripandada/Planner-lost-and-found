import { Injectable } from "@angular/core";
import { ActivatedRouteSnapshot, Resolve } from "@angular/router";
import { Observable } from "rxjs";
import { AssetDetailsData, AssetManagementClient, GetAssetDetailsQuery } from "../autogenerated-clients/api-client";

@Injectable({ providedIn: "root" })
export class AssetDetailsDataResolver implements Resolve<Observable<AssetDetailsData>> {
  constructor(private assetManagementClient: AssetManagementClient) { }

  resolve(routeSnapshot: ActivatedRouteSnapshot) {
    const assetId: string = routeSnapshot.params.assetId;
    const assetGroupId: string = routeSnapshot.params.assetGroupId;
    return this.assetManagementClient.getAssetDetails(new GetAssetDetailsQuery({ assetId: assetId, assetGroupId: assetGroupId }));
  }
}
